<style>
canvas{
    width:600px;
    height:600px;
    border:black solid 1px;
}
</style>

<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var color_choice = document.getElementById('color_choice');
var step_size = document.getElementById('step_size');
ctx.canvas.width = 600;
ctx.canvas.height = 600;
ctx.fillStyle = "black";
var lastx = 100;
var lasty = 100;
var newx = 0;
var newy = 0;

function draw_triangle(){
    var draw_amount = parseInt(step_size.options[step_size.selectedIndex].text);
    for(i=0;i<draw_amount;i++){   
        draw(Math.floor(lastx),Math.floor(lasty));  
        randompoint = choose(
            [[50,500],[300,100],[500,500]]
        );
        newx = (randompoint[0] + lastx)/2;
        newy = (randompoint[1] + lasty)/2;
        lastx = newx;
        lasty = newy;
    }
}
function clear_canvas(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    lastx = 0;
    lasty = 0;
    newx = 0;
    newy = 0;
}
function draw_fern(){
    var draw_amount = parseInt(step_size.options[step_size.selectedIndex].text);
    for(i=0;i<draw_amount;i++){
        draw(Math.floor(lastx*80+250),-Math.floor(lasty*55-580));
        randomtransform = Math.random();
        if(randomtransform<0.85){
            newx = lastx* 0.85+ lasty*0.04 ;
            newy = lastx* -0.04 + lasty* 0.85 + 1.6;
        }else if(randomtransform>=0.85 && randomtransform<0.92){
            newx = lastx* -0.15 + lasty*0.28;
            newy = lastx* 0.26 + lasty*0.24 + 0.44;
        }else if(randomtransform>=0.92 && randomtransform<0.99){
            newx = lastx*0.2 + lasty*-0.26;
            newy = lastx*0.23 + lasty*0.22 + 1.6;
        }else if(randomtransform>0.99){
            newx = 0;
            newy = lasty*0.16
        }
        lastx = newx;
        lasty = newy;
    }
}



function draw(x,y){
    ctx.fillStyle = color_choice.options[color_choice.selectedIndex].text;
    ctx.fillRect(x,y,1,1); // fill in the pixel at (10,10)
}
function sleep(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
      break;
    }
  }
}
function choose(choices) {
    var index = Math.floor(Math.random() * choices.length);
    return choices[index];
}
</script>
